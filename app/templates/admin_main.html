{% extends 'base.html' %}

{% block head %}
<script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
<style>
    form{
        /* position:fixed; */
        padding:0;
        margin:0;
    }
    #mainBody{
        /* display: flex;
        flex-direction: column;
        align-items: flex-start; */
        justify-content: center;
        height: 100vh;
        width: 100vw;
        padding: 5vh 5vw;
    }
    .main-title{
        width: 20vw;
        height: 10vh;

        /* font-family: 'Comfortaa'; */
        font-style: normal;
        font-weight: 360;
        font-size: 8vw;
        line-height:10vh;
        display: flex;
        align-items: center;
        letter-spacing: -0.015em;
        color: #000000;
    }
    .searchsubhead{
        font-weight: 900;
        font-size: 3vw;

        /* padding-top: 1vh; */
        padding-bottom: 1vh;
        font-style: normal;
        margin-top: 4vh;
        line-height: 2vh;
        display: flex;
        align-items: center;
        letter-spacing: -0.015em;
        color: #000000;
    }
    .searchBox {
        margin: auto;
        width: 100%;
        height: 6vh;
        padding: 0 3vw;
        border: 0.5vw solid #000;
        background: #FFFFFF;
        font-style: normal;
        font-weight: 500;
        font-size: 2vh;
        color: #000000;
    }
    .roomgroup{
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: flex-start;
        align-items: stretch;
        padding: 0% 0% 20% 0%;
    }
    .room{
        height: 25vh;
        width: 41vw;
        margin: 0vh 2vw 2vh 2vw;
        border-radius: 1vw;
        filter: drop-shadow(2px 2px 5px rgba(0, 0, 0, 0.25));
        background-color: white;
    }
    .roomimg{
        width: 100%;
        height: 80%;
        border-radius: 1vw 1vw 0 0;
    }
    .roomtext{
        width: 100%;
        height: 20%;
        padding: 2% 6%;
    }
    .roomname{
        font-size: 3.3vw;
        font-weight: 500;
    }
    .roomlift{
        font-size: 2.4vw;
        font-weight: 300;
    }
    .roomelse{
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        margin-left: auto;
        align-items: flex-end;
        position: relative;
        bottom: 80%;
    }
    .roomdate{
        position: relative;
        font-size: 2.4vw;
        font-weight: 300;
    }
    .roomtime{
        position: relative;
        font-size: 2.4vw;
        font-weight: 300;
    }
    #mainFooter{
        position: fixed;
        z-index: 999;
        width: 100vw;
        height: 10vh;
        bottom: 4vh;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        display: inline;
        /* float: left;
        z-index: 999;
        width: 100vw;
        height: 10vh;
        bottom: 4vh;
        flex-direction: column;
        justify-content: center;
        align-items: center; */
    }
    .btnAdd{
        position: relative;
        margin-top: 6vh;
        margin-bottom: 3vh;
        /* padding-top:2vh; */
        width: 50vw;
        height: 7vh;
        /* top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%); */
        background: #0074BC;
        border-radius: 1vh;
        font-size: 4vh;
        text-align: center;
        color: white;
    }
    .error{
        position: fixed;
        top: 0;
        left: 0;
        height: 5vh;
        width: 100vw;
        background: #ffeb99;
        text-align: center;
        font-style: normal;
        font-weight: 500;
        font-size: 2vh;
        padding-top: 1vh;
    }
    .room-empty{
        margin: auto;
        text-align: center;
        font-style: normal;
        font-weight: 500;
        font-size: 2vh;
        padding-top: 5vh;
    }
    .img_profile{
        transform: scale(10);
        position: absolute;
        margin: 14vh 0vw 0vh 86vw;
        /* width: 5vw; */
        height: 5vh;
	}
    #btn-profile {
        opacity: 0;
        margin: -8vh 0vw 0vh 83vw;
        position:absolute;
        z-index: 100;
        width: 7vw;
        height: 7vh;
        /* background: #000000;
        border: 2px solid #000000;
        border-radius: 1vw; */
        font-style: normal;
        font-weight: 500;
        font-size: 2vh;
        color: #FFFFFF;
    }

    #main-title,#profile{
        display: inline-block;
    }
</style>

{% endblock %}

{% block content %}

<form method="post" id="admin-main" enctype="multipart/form-data">
    {% if not error=='' %}
    <div class="error">
        {{error}}
    </div>
    {% endif %}
    <div class="main">
    <!-- body -->
    <div id="mainBody">  
        <div class="main-title">Rooms</div>
        <div class="profile">
            <input id="btn-profile" type='submit' name="profile" value="profile">
            <div class="img_profile">
                <svg width="20" height="20" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.2174 20.4783C17.3359 20.4783 15 22.8142 15 25.6957V27H25.4348V25.6957C25.4348 22.8142 23.0989 20.4783 20.2174 20.4783Z" stroke="black"/>
                    <ellipse cx="20.2175" cy="15.913" rx="3.91307" ry="3.91304" stroke="black" stroke-linecap="square"/>
                </svg>
            </div>
        </div>
        <div class="searchsubhead">SEARCH</div>
            <input class="searchBox" type="text" placeholder="Search all rooms" name="room_id"/>
        <div class="searchsubhead">BROWSE ALL</div>
        <div class="roomgroup">
            {% if roomInfo %}
                {% for k, v in roomInfo.items() %}
                <div class="room" v-on:click="goRoom($event, '{{v.name}}')">
                    <img class="roomimg" src="../../static/images/test/room{{v.name}}/_basic_upload.png" />
                    <div class="roomtext">
                        <div class="roomname">Room {{v.name}}</div>
                        <div class="roomlift">{{v.lift}}</div>
                        <div class="roomelse">
                            
                            <!-- <div class="roomdate">{{v.date}}</div>
                            <div class="roomtime">{{v.time}}</div> -->
                           
                            <div class="roomdate">TBA</div>
                            <div class="roomtime">TBA</div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="room-empty">No room now! Please create one!</div>
            {% endif %}
            
        </div>
    
        <!-- footer -->
        <div id="mainFooter">
            <!-- <div class="profile">
                <input id="btn-database" type='submit' name="database" value="database">
                <div class="img_profile">
                    <svg width="15" height="15" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.1875 0C11.4416 0 10.7262 0.296316 10.1988 0.823762C9.67132 1.35121 9.375 2.06658 9.375 2.8125V4.6875C9.375 5.43342 9.67132 6.14879 10.1988 6.67624C10.7262 7.20368 11.4416 7.5 12.1875 7.5H17.8125C18.5584 7.5 19.2738 7.20368 19.8012 6.67624C20.3287 6.14879 20.625 5.43342 20.625 4.6875V2.8125C20.625 2.06658 20.3287 1.35121 19.8012 0.823762C19.2738 0.296316 18.5584 0 17.8125 0L12.1875 0ZM17.8125 1.875C18.0611 1.875 18.2996 1.97377 18.4754 2.14959C18.6512 2.3254 18.75 2.56386 18.75 2.8125V4.6875C18.75 4.93614 18.6512 5.1746 18.4754 5.35041C18.2996 5.52623 18.0611 5.625 17.8125 5.625H12.1875C11.9389 5.625 11.7004 5.52623 11.5246 5.35041C11.3488 5.1746 11.25 4.93614 11.25 4.6875V2.8125C11.25 2.56386 11.3488 2.3254 11.5246 2.14959C11.7004 1.97377 11.9389 1.875 12.1875 1.875H17.8125Z" fill="black"/>
                        <path d="M7.5 2.8125H5.625C4.63044 2.8125 3.67661 3.20759 2.97335 3.91085C2.27009 4.61411 1.875 5.56794 1.875 6.5625V26.25C1.875 27.2446 2.27009 28.1984 2.97335 28.9016C3.67661 29.6049 4.63044 30 5.625 30H24.375C25.3696 30 26.3234 29.6049 27.0266 28.9016C27.7299 28.1984 28.125 27.2446 28.125 26.25V6.5625C28.125 5.56794 27.7299 4.61411 27.0266 3.91085C26.3234 3.20759 25.3696 2.8125 24.375 2.8125H22.5V4.6875C22.5 5.30307 22.3788 5.91262 22.1432 6.48133C21.9076 7.05004 21.5623 7.56679 21.1271 8.00206C20.6918 8.43734 20.175 8.78262 19.6063 9.01819C19.0376 9.25375 18.4281 9.375 17.8125 9.375H12.1875C10.9443 9.375 9.75201 8.88114 8.87294 8.00206C7.99386 7.12299 7.5 5.9307 7.5 4.6875V2.8125ZM18.75 15C18.75 14.5027 18.9475 14.0258 19.2992 13.6742C19.6508 13.3225 20.1277 13.125 20.625 13.125C21.1223 13.125 21.5992 13.3225 21.9508 13.6742C22.3025 14.0258 22.5 14.5027 22.5 15V24.375C22.5 24.8723 22.3025 25.3492 21.9508 25.7008C21.5992 26.0525 21.1223 26.25 20.625 26.25C20.1277 26.25 19.6508 26.0525 19.2992 25.7008C18.9475 25.3492 18.75 24.8723 18.75 24.375V15ZM7.5 22.5C7.5 22.0027 7.69754 21.5258 8.04918 21.1742C8.40081 20.8225 8.87772 20.625 9.375 20.625C9.87228 20.625 10.3492 20.8225 10.7008 21.1742C11.0525 21.5258 11.25 22.0027 11.25 22.5V24.375C11.25 24.8723 11.0525 25.3492 10.7008 25.7008C10.3492 26.0525 9.87228 26.25 9.375 26.25C8.87772 26.25 8.40081 26.0525 8.04918 25.7008C7.69754 25.3492 7.5 24.8723 7.5 24.375V22.5ZM15 16.875C15.4973 16.875 15.9742 17.0725 16.3258 17.4242C16.6775 17.7758 16.875 18.2527 16.875 18.75V24.375C16.875 24.8723 16.6775 25.3492 16.3258 25.7008C15.9742 26.0525 15.4973 26.25 15 26.25C14.5027 26.25 14.0258 26.0525 13.6742 25.7008C13.3225 25.3492 13.125 24.8723 13.125 24.375V18.75C13.125 18.2527 13.3225 17.7758 13.6742 17.4242C14.0258 17.0725 14.5027 16.875 15 16.875Z" fill="black"/>
                    </svg>
                </div>
            </div> -->
            <input class="btnAdd" type="submit" name="add" value="+">
        </div>
    </div>
  </div>
  <!-- auxiliary field: not show in frontend, deal with form submit to send RoomId -->
  <div id="roomId" style="display:none">
    <input id="children0" type="text" name="roomid" value="" style="display:none">
  </div>
</form>

<script>
    Vue.createApp({
      data() {
        return {
        }
      },
      delimiters: ['{[', ']}'],
      methods: {
        goRoom: function (event, roomid) {
            console.log(roomid)
            var form = document.getElementById("admin-main");
            var roomDiv = document.getElementById("roomId");

            roomDiv.children[0].setAttribute('value', roomid);
            console.log(roomDiv.children[0].value)
            
            form.submit();
        },
      }
    }).mount('#admin-main')    
</script>

<script>
   

</script>
{% endblock %}